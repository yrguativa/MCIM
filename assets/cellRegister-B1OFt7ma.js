import{i as V,r as m,j as e,W as ae,X as re,Y as B,Z as oe,$ as K,a0 as L,a1 as ne,a2 as ce,g as M,T as le,o as X,a3 as ie,s as w,a4 as de,A as ue,f as me,u as he,a as pe,F as xe,H as fe,a5 as be,J as je,K as E,M as I,N as _,O as v,I as H,V as $,P as F,B as y,a6 as O,t as Ce}from"./index-Dnm8NtzM.js";import{P as ke,a as ge,b as ve,C as ye}from"./calendar-BdTHWqt5.js";import{T as Ne,a as we,b as A,c as T,d as Pe,e as N,f as Re}from"./table-3gB7m6cA.js";import{u as Se,B as Ee}from"./cell.store-zFbGR8WI.js";import{C as Ie,a as _e}from"./circle-check-big-bZLj8aGH.js";import{f as Fe}from"./format-B6N5uOCh.js";import"./endOfMonth-BxcVBkcm.js";import"./toDate-KnhkpVFB.js";/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ae=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],Te=V("square-plus",Ae);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Me=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Be=V("trash-2",Me);var P="Checkbox",[De,Ye]=ae(P),[Ue,D]=De(P);function qe(t){const{__scopeCheckbox:l,checked:c,children:h,defaultChecked:r,disabled:a,form:p,name:x,onCheckedChange:d,required:s,value:o="on",internal_do_not_use_render:n}=t,[f,k]=oe({prop:c,defaultProp:r??!1,onChange:d,caller:P}),[j,C]=m.useState(null),[g,i]=m.useState(null),u=m.useRef(!1),R=j?!!p||!!j.closest("form"):!0,S={checked:f,disabled:a,setChecked:k,control:j,setControl:C,name:x,form:p,value:o,hasConsumerStoppedPropagationRef:u,required:s,defaultChecked:b(r)?!1:r,isFormControl:R,bubbleInput:g,setBubbleInput:i};return e.jsx(Ue,{scope:l,...S,children:Le(n)?n(S):h})}var z="CheckboxTrigger",G=m.forwardRef(({__scopeCheckbox:t,onKeyDown:l,onClick:c,...h},r)=>{const{control:a,value:p,disabled:x,checked:d,required:s,setControl:o,setChecked:n,hasConsumerStoppedPropagationRef:f,isFormControl:k,bubbleInput:j}=D(z,t),C=K(r,o),g=m.useRef(d);return m.useEffect(()=>{const i=a?.form;if(i){const u=()=>n(g.current);return i.addEventListener("reset",u),()=>i.removeEventListener("reset",u)}},[a,n]),e.jsx(B.button,{type:"button",role:"checkbox","aria-checked":b(d)?"mixed":d,"aria-required":s,"data-state":Q(d),"data-disabled":x?"":void 0,disabled:x,value:p,...h,ref:C,onKeyDown:L(l,i=>{i.key==="Enter"&&i.preventDefault()}),onClick:L(c,i=>{n(u=>b(u)?!0:!u),j&&k&&(f.current=i.isPropagationStopped(),f.current||i.stopPropagation())})})});G.displayName=z;var U=m.forwardRef((t,l)=>{const{__scopeCheckbox:c,name:h,checked:r,defaultChecked:a,required:p,disabled:x,value:d,onCheckedChange:s,form:o,...n}=t;return e.jsx(qe,{__scopeCheckbox:c,checked:r,defaultChecked:a,disabled:x,required:p,onCheckedChange:s,name:h,form:o,value:d,internal_do_not_use_render:({isFormControl:f})=>e.jsxs(e.Fragment,{children:[e.jsx(G,{...n,ref:l,__scopeCheckbox:c}),f&&e.jsx(Z,{__scopeCheckbox:c})]})})});U.displayName=P;var J="CheckboxIndicator",W=m.forwardRef((t,l)=>{const{__scopeCheckbox:c,forceMount:h,...r}=t,a=D(J,c);return e.jsx(re,{present:h||b(a.checked)||a.checked===!0,children:e.jsx(B.span,{"data-state":Q(a.checked),"data-disabled":a.disabled?"":void 0,...r,ref:l,style:{pointerEvents:"none",...t.style}})})});W.displayName=J;var Y="CheckboxBubbleInput",Z=m.forwardRef(({__scopeCheckbox:t,...l},c)=>{const{control:h,hasConsumerStoppedPropagationRef:r,checked:a,defaultChecked:p,required:x,disabled:d,name:s,value:o,form:n,bubbleInput:f,setBubbleInput:k}=D(Y,t),j=K(c,k),C=ne(a),g=ce(h);m.useEffect(()=>{const u=f;if(!u)return;const R=window.HTMLInputElement.prototype,q=Object.getOwnPropertyDescriptor(R,"checked").set,se=!r.current;if(C!==a&&q){const te=new Event("click",{bubbles:se});u.indeterminate=b(a),q.call(u,b(a)?!1:a),u.dispatchEvent(te)}},[f,C,a,r]);const i=m.useRef(b(a)?!1:a);return e.jsx(B.input,{type:"checkbox","aria-hidden":!0,defaultChecked:p??i.current,required:x,disabled:d,name:s,value:o,form:n,...l,tabIndex:-1,ref:j,style:{...l.style,...g,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});Z.displayName=Y;function Le(t){return typeof t=="function"}function b(t){return t==="indeterminate"}function Q(t){return b(t)?"indeterminate":t?"checked":"unchecked"}const ee=m.forwardRef(({className:t,...l},c)=>e.jsx(U,{ref:c,className:M("peer h-4 w-4 shrink-0 rounded-sm border border-primary shadow focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",t),...l,children:e.jsx(W,{className:M("flex items-center justify-center text-current"),children:e.jsx(le,{className:"h-4 w-4"})})}));ee.displayName=U.displayName;const He=X({id:w().uuid().default(crypto.randomUUID()),name:w().min(2,{message:"El nombre del asistente a la celula es obligatorio."}),attended:ie().default(!1)}),$e=X({date:ue({error:"La fecha de la celula es obligatoria."}),topic:w().min(2,{message:"El tema de la celula es obligatorio."}),createdUser:w().min(2,{message:"El usuario de la celula es obligatorio."}),assistants:de(He).min(2,"La celula debe tener 2 almenos dos asistentes.")}),Ze=()=>{const{id:t}=me(),l=he(),c=pe(s=>s.user),h=Se(s=>s.addRecord),r=xe({resolver:fe($e),defaultValues:{topic:"",date:new Date,createdUser:c?.id||""}}),{fields:a,append:p,remove:x}=be({name:"assistants",control:r.control});function d(s){h(t,s),Ce("El registro de la celula se guardo correctamente.",{icon:e.jsx(_e,{className:"h-4 w-4 text-green-500"})}),l("/cell/"+t)}return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex items-center",children:e.jsxs("h1",{className:"text-lg font-semibold md:text-2xl",children:["Registro Asistencia de ",e.jsx("mark",{children:"Celula"})]})}),e.jsx("div",{className:"flex items-center items-center justify-center text-start rounded-lg border border-dashed p-4 shadow-sm",children:e.jsx(je,{...r,children:e.jsxs("form",{onSubmit:r.handleSubmit(d),className:"grid grid-cols-2 grid-flow-row gap-2 w-full",children:[e.jsx(E,{control:r.control,name:"topic",render:({field:s})=>e.jsxs(I,{children:[e.jsx(_,{children:"Tema"}),e.jsx(v,{children:e.jsx(H,{placeholder:"Tema",...s})}),e.jsx($,{children:"Ingresa el tema que se compartio en la celula"}),e.jsx(F,{})]})}),e.jsx(E,{control:r.control,name:"date",render:({field:s})=>e.jsxs(I,{className:"flex flex-col pt-2",children:[e.jsx(_,{children:"Fecha de Celula"}),e.jsxs(ke,{children:[e.jsx(ge,{asChild:!0,children:e.jsx(v,{children:e.jsxs(y,{variant:"outline",className:M("pl-3 text-left font-normal",!s.value&&"text-muted-foreground"),children:[s.value?Fe(s.value,"PPP"):e.jsx("span",{children:"Pick a date"}),e.jsx(Ie,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),e.jsx(ve,{className:"w-auto p-0",align:"start",children:e.jsx(ye,{mode:"single",selected:s.value,onSelect:s.onChange,disabled:o=>o>new Date||o<new Date("1900-01-01"),initialFocus:!0})})]}),e.jsx($,{children:"Registrar la fecha de la celula."}),e.jsx(F,{})]})}),e.jsxs("div",{className:"col-span-2 gap-3 pb-3",children:[e.jsx("span",{className:"col-span-2 text-xl font-semibold",children:"Asistentes"}),e.jsxs(Ne,{children:[e.jsx(we,{children:e.jsxs(A,{children:[e.jsx(T,{children:"Nombre Asistente"}),e.jsx(T,{children:"Asistencia"}),e.jsx(T,{})]})}),e.jsx(Pe,{children:a.map((s,o)=>e.jsxs(A,{children:[e.jsx(N,{children:e.jsx(O,{name:`assistants.${o}.name`,control:r.control,render:()=>e.jsx(E,{control:r.control,name:`assistants.${o}.name`,render:({field:n})=>e.jsxs(I,{children:[e.jsx(v,{children:e.jsx(H,{placeholder:"Nombre del asistente",...n})}),e.jsx(F,{})]})})})}),e.jsx(N,{children:e.jsx(O,{name:`assistants.${o}.attended`,control:r.control,render:({field:n})=>e.jsxs(e.Fragment,{children:[e.jsx(v,{children:e.jsx(ee,{checked:n.value,onCheckedChange:n.onChange})}),e.jsx("div",{className:"space-y-1 leading-none",children:e.jsx(_,{children:n.value?"Asistio":"No Asistio"})})]})})}),e.jsx(N,{children:o>0&&e.jsxs(y,{type:"button",variant:"destructive",onClick:()=>x(o),children:[e.jsx(Be,{})," Eliminar"]})})]},s.id))}),e.jsx(Re,{children:e.jsx(A,{children:e.jsx(N,{colSpan:3,className:"text-center",children:e.jsxs(y,{variant:"outline",type:"button",onClick:()=>p({id:crypto.randomUUID(),name:"",attended:!0}),children:[e.jsx(Te,{className:"mr-2"})," Agregar Asistente"]})})})})]})]}),e.jsxs(y,{type:"submit",className:"col-span-2",children:[e.jsx(Ee,{className:"mr-2"})," Agregar Registro Celula"]})]})})})]})};export{Ze as default};
