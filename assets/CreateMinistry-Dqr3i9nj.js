import{o as y,a3 as b,A as E,s as n,u as N,f as v,a as M,aa as g,F as S,H as w,r as C,j as e,C as F,J as z,K as l,M as m,N as d,O as u,I,P as A,B as D,t}from"./index-Dnm8NtzM.js";import{S as U}from"./switch-DoFI_Twh.js";import{S as k}from"./save-Ck3GFfCn.js";const B=y({id:n().optional(),name:n().min(3,"El nombre debe tener al menos 3 caracteres"),createdUser:n().min(1,"El usuario de creación es requerido"),createdDate:E().optional(),active:b().default(!0)}),H=()=>{const o=N(),{id:s}=v(),x=M(a=>a.user),{ministries:c,addMinistry:h,updateMinistry:f}=g(),i=S({resolver:w(B),defaultValues:{id:s||crypto.randomUUID(),name:"",createdUser:x?.id||"",createdDate:new Date,active:!0}});C.useEffect(()=>{(async()=>{if(s)try{const r=c.find(p=>p.id===s);r&&i.reset(r)}catch(r){console.error("Error loading ministry:",r),t("Error al cargar el ministerio",{description:"No se pudo obtener la información del ministerio"}),o("/ministries")}})()},[s,c,i,o]);async function j(a){try{let r;if(s?(r=await f(a),r&&t("Ministerio actualizado correctamente",{description:"El ministerio se ha actualizado exitosamente"})):(r=await h(a),r&&t("Ministerio creado correctamente",{description:"El ministerio se ha registrado exitosamente"})),r)o("/ministries");else throw new Error(s?"Error al actualizar el ministerio":"Error al crear el ministerio")}catch(r){console.error(r),t(s?"Error al actualizar el ministerio":"Error al crear el ministerio",{description:`Ocurrió un error al intentar ${s?"actualizar":"crear"} el ministerio`})}}return e.jsx("div",{className:"container mx-auto p-4",children:e.jsxs(F,{className:"p-6",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Crear Nuevo Ministerio"}),e.jsx(z,{...i,children:e.jsxs("form",{onSubmit:i.handleSubmit(j),className:"space-y-4",children:[e.jsx(l,{control:i.control,name:"name",render:({field:a})=>e.jsxs(m,{children:[e.jsx(d,{children:"Nombre del Ministerio"}),e.jsx(u,{children:e.jsx(I,{placeholder:"Ingrese el nombre del ministerio",...a})}),e.jsx(A,{})]})}),s&&e.jsx(l,{control:i.control,name:"active",render:({field:a})=>e.jsxs(m,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(d,{className:"text-base",children:"Estado"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Activar o desactivar el ministerio"})]}),e.jsx(u,{children:e.jsx(U,{checked:a.value,onCheckedChange:a.onChange})})]})}),e.jsxs(D,{type:"submit",className:"w-full",children:[e.jsx(k,{className:"mr-2 h-4 w-4"})," ",s?"Actualizar":"Crear"," Ministerio"]})]})})]})})};export{H as default};
