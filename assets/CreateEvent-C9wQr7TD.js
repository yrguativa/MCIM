import{o as b,A as m,s as t,E,u as S,a as C,r as f,F as y,H as N,j as e,C as F,J as D,K as o,M as c,N as n,O as i,I as l,P as d,B as I,t as h}from"./index-mvomixtw.js";import{u as w}from"./event.store-BY-hmKmP.js";import{S as L}from"./switch-BLL_cUPa.js";import{S as A}from"./save-DjvIoHOi.js";import"./toDate-KnhkpVFB.js";const B=b({id:t(),name:t().min(3,{message:"El nombre debe tener al menos 3 caracteres"}).max(100,{message:"El nombre no puede exceder los 100 caracteres"}),description:t().min(10,{message:"La descripción debe tener al menos 10 caracteres"}).max(500,{message:"La descripción no puede exceder los 500 caracteres"}),date:m({error:"La fecha de inicio es requerida"}),endDate:m({error:"La fecha debe ser válida"}).optional(),location:t().min(5,{message:"La ubicación debe tener al menos 5 caracteres"}).max(200,{message:"La ubicación no puede exceder los 200 caracteres"}),capacity:E({error:"La capacidad debe ser un número"}).min(1,{message:"La capacidad debe ser al menos 1"}).optional(),createdBy:t(),createdAt:m(),updatedBy:t().optional(),updatedAt:m().optional()}),H=()=>{const u=S(),j=C(a=>a.user),[x,p]=f.useState(!1),s=y({resolver:N(B),defaultValues:{id:crypto.randomUUID(),createdBy:j?.id||"",createdAt:new Date}}),v=w(a=>a.addEvent);async function g(a){try{if(await v(a))h("Evento creado correctamente",{description:"El evento se ha registrado exitosamente"}),u("/events");else throw new Error("No se pudo crear el evento")}catch(r){console.error("Error creating event:",r),h("Error al crear el evento",{description:"Ocurrió un error al intentar crear el evento"})}}return e.jsx("div",{className:"container mx-auto p-4",children:e.jsxs(F,{className:"p-6",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Crear Nuevo Evento"}),e.jsx(D,{...s,children:e.jsxs("form",{onSubmit:s.handleSubmit(g),className:"space-y-4",children:[e.jsx(o,{control:s.control,name:"name",render:({field:a})=>e.jsxs(c,{children:[e.jsx(n,{children:"Nombre del Evento"}),e.jsx(i,{children:e.jsx(l,{placeholder:"Ingrese el nombre del evento",...a})}),e.jsx(d,{})]})}),e.jsx(o,{control:s.control,name:"description",render:({field:a})=>e.jsxs(c,{children:[e.jsx(n,{children:"Descripción"}),e.jsx(i,{children:e.jsx(l,{placeholder:"Describa el evento",...a})}),e.jsx(d,{})]})}),e.jsx(o,{control:s.control,name:"date",render:({field:a})=>e.jsxs(c,{children:[e.jsx(n,{children:"Fecha de Inicio"}),e.jsx(i,{children:e.jsx(l,{type:"datetime-local",onChange:r=>a.onChange(new Date(r.target.value)),value:a.value?a.value.toISOString().slice(0,16):""})}),e.jsx(d,{})]})}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(L,{id:"has-end-date",checked:x,onCheckedChange:p}),e.jsx(n,{children:"¿Tiene fecha de finalización?"})]}),x&&e.jsx(o,{control:s.control,name:"endDate",render:({field:a})=>e.jsxs(c,{children:[e.jsx(n,{children:"Fecha de Finalización"}),e.jsx(i,{children:e.jsx(l,{type:"datetime-local",onChange:r=>a.onChange(new Date(r.target.value)),value:a.value?a.value.toISOString().slice(0,16):""})}),e.jsx(d,{})]})}),e.jsx(o,{control:s.control,name:"location",render:({field:a})=>e.jsxs(c,{children:[e.jsx(n,{children:"Ubicación"}),e.jsx(i,{children:e.jsx(l,{placeholder:"Indique la ubicación del evento",...a})}),e.jsx(d,{})]})}),e.jsx(o,{control:s.control,name:"capacity",render:({field:a})=>e.jsxs(c,{children:[e.jsx(n,{children:"Capacidad"}),e.jsx(i,{children:e.jsx(l,{type:"number",placeholder:"Número máximo de participantes",onChange:r=>a.onChange(r.target.value?parseInt(r.target.value):void 0),value:a.value||""})}),e.jsx(d,{})]})}),e.jsxs(I,{type:"submit",className:"w-full",children:[e.jsx(A,{className:"mr-2 h-4 w-4"})," Crear Evento"]})]})})]})})};export{H as default};
