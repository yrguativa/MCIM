import{i as y,o as I,A as g,s as i,u as S,f as F,a as U,n as P,aa as A,F as E,H as L,r as k,j as e,J as M,K as o,M as t,N as n,O as c,I as m,P as l,B as u,g as p,Q as z,ab as B,t as f}from"./index-mvomixtw.js";import{n as b,C as R,a as _,c as T,d as V,e as q}from"./command-LcFnjYov.js";import{P as D,a as v,b as N,C as G}from"./calendar-BzNLO9y2.js";import{C as H,a as O}from"./circle-check-big-DlqpU798.js";import{S as $}from"./save-DjvIoHOi.js";import{f as J}from"./format-B6N5uOCh.js";import"./dialog-R8cPPMiw.js";import"./endOfMonth-BxcVBkcm.js";import"./toDate-KnhkpVFB.js";/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Q=y("check",K);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=[["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"M2.586 16.726A2 2 0 0 1 2 15.312V8.688a2 2 0 0 1 .586-1.414l4.688-4.688A2 2 0 0 1 8.688 2h6.624a2 2 0 0 1 1.414.586l4.688 4.688A2 2 0 0 1 22 8.688v6.624a2 2 0 0 1-.586 1.414l-4.688 4.688a2 2 0 0 1-1.414.586H8.688a2 2 0 0 1-1.414-.586z",key:"2d38gg"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],W=y("octagon-x",X),Y=I({id:i().min(1,{message:"El id es obligatorio."}).default(crypto.randomUUID()),identification:b({error:"La identificación no es un número valido."}).optional().refine(x=>x!==void 0,{message:"La identificación es obligatoria."}),name:i().min(2,{message:"Los nombres del discipulo es obligatorio."}),lastName:i().min(2,{message:"Los apellidos del discipulo son obligatorios."}),number:b({error:"A telefono is required."}).optional(),address:i().min(5,{message:"La dirección debe tener minimo 5 caracteres."}).optional(),email:i().min(5,{message:"La dirección debe tener minimo 5 caracteres."}).email("El correo no es valido").optional(),birthday:g({error:"La fecha de nacimiento es obligatoria."}).optional(),ministryId:i().min(2,{message:"El ministerio es obligatorio."}),createdUser:i().min(2,{message:"El usuario de creación es obligatorio."}),createdDate:g({error:"La fecha de creación es obligatoria."})}),ce=()=>{const x=S(),{id:d}=F(),h=U(s=>s.user),w=P(s=>s.updateDisciple),j=A(s=>s.ministries),r=E({resolver:L(Y),defaultValues:{id:d||crypto.randomUUID(),createdUser:h?.id||void 0,createdDate:new Date}});d&&k.useEffect(()=>{(async()=>{const a=await B.getDisciple(d);a&&r.reset({id:d,createdUser:a.createdUser||h?.id,createdDate:a.createdDate?new Date(a.createdDate):new Date,name:a.name,lastName:a.lastName,identification:parseInt(a.identification),number:a.phone?parseInt(a.phone):void 0,email:a.email||void 0,address:a.address||void 0,birthday:a.birthDate?new Date(a.birthDate):void 0,ministryId:a.ministryId})})()},[d]);async function C(s){await w({id:s.id,name:s.name,lastName:s.lastName,identification:s.identification?.toString()||"",email:s.email,address:s.address,birthDate:s.birthday,ministryId:s.ministryId,createdUser:s.createdUser,createdDate:s.createdDate,updatedUser:h?.id||"",updatedDate:new Date,phone:s.number?.toString()})?(f("Discipulo registrado correctamente",{icon:e.jsx(O,{className:"h-4 w-4 text-green-500"})}),x("/disciples")):f("Error al registrar el discipulo",{icon:e.jsx(W,{className:"h-4 w-4 text-red-500"})})}return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex items-center",children:e.jsx("h1",{className:"text-lg font-semibold md:text-2xl",children:"Registro de Discipulo"})}),e.jsx("div",{className:"flex items-center items-center justify-center text-start rounded-lg border border-dashed p-4 shadow-sm",children:e.jsx(M,{...r,children:e.jsxs("form",{onSubmit:r.handleSubmit(C),className:"grid grid-cols-2 grid-flow-row gap-2 w-full",children:[e.jsx(o,{control:r.control,name:"identification",render:({field:s})=>e.jsxs(t,{children:[e.jsx(n,{children:"Identificaciòn"}),e.jsx(c,{children:e.jsx(m,{placeholder:"1078934334",type:"number",...s})}),e.jsx(l,{})]})}),e.jsx(o,{control:r.control,name:"name",render:({field:s})=>e.jsxs(t,{children:[e.jsx(n,{children:"Nombres"}),e.jsx(c,{children:e.jsx(m,{placeholder:"Andres Camilo",...s})}),e.jsx(l,{})]})}),e.jsx(o,{control:r.control,name:"lastName",render:({field:s})=>e.jsxs(t,{children:[e.jsx(n,{children:"Apellidos"}),e.jsx(c,{children:e.jsx(m,{placeholder:"Rodriguez Romero",...s})}),e.jsx(l,{})]})}),e.jsx(o,{control:r.control,name:"number",render:({field:s})=>e.jsxs(t,{children:[e.jsx(n,{children:"Telefono"}),e.jsx(c,{children:e.jsx(m,{placeholder:"3002354034",...s})}),e.jsx(l,{})]})}),e.jsx(o,{control:r.control,name:"address",render:({field:s})=>e.jsxs(t,{children:[e.jsx(n,{children:"Direccion"}),e.jsx(c,{children:e.jsx(m,{placeholder:"Calle 12 N2-47 Alejandria 3 Torre 3 Apartamento 502 ",...s})}),e.jsx(l,{})]})}),e.jsx(o,{control:r.control,name:"ministryId",render:({field:s})=>e.jsxs(t,{className:"flex flex-col",children:[e.jsx(n,{className:"mt-1 mb-1",children:"Ministerio"}),e.jsxs(D,{children:[e.jsx(v,{asChild:!0,children:e.jsx(c,{children:e.jsxs(u,{variant:"outline",role:"combobox",className:p("w-full justify-between",!s.value&&"text-muted-foreground"),children:[s.value?j.find(a=>a.id===s.value)?.name:"Selecciona un ministerio",e.jsx(z,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})})}),e.jsx(N,{className:"w-[400px] p-0",children:e.jsxs(R,{children:[e.jsx(_,{placeholder:"Buscar ministerio..."}),e.jsx(T,{children:"No se encontró el ministerio"}),e.jsx(V,{children:j?.map(a=>e.jsxs(q,{value:a.id,onSelect:()=>{r.setValue("ministryId",a.id)},children:[e.jsx(Q,{className:p("mr-2 h-4 w-4",a.id===s.value?"opacity-100":"opacity-0")}),a.name]},a.id))})]})})]}),e.jsx(l,{})]})}),e.jsx(o,{control:r.control,name:"birthday",render:({field:s})=>e.jsxs(t,{className:"flex flex-col pt-2",children:[e.jsx(n,{children:"Fecha de nacimiento"}),e.jsxs(D,{children:[e.jsx(v,{asChild:!0,children:e.jsx(c,{children:e.jsxs(u,{variant:"outline",className:p("pl-3 text-left font-normal",!s.value&&"text-muted-foreground"),children:[s.value?J(s.value,"PPP"):e.jsx("span",{children:"Elige una fecha"}),e.jsx(H,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),e.jsx(N,{className:"w-auto p-0",align:"start",children:e.jsx(G,{mode:"single",selected:s.value,onSelect:s.onChange,disabled:a=>a>new Date||a<new Date("1900-01-01"),initialFocus:!0})})]}),e.jsx(l,{})]})}),e.jsxs(u,{type:"submit",className:"col-span-2",children:[e.jsx($,{className:"mr-2"})," Guardr cambios"]})]})})})]})};export{ce as default};
