import{i as Z,j as e,u as B,B as b,r as H,f as J,y as k,z as Y,o as z,s as v,A as K,E as Q,a as q,n as _,F as $,H as W,J as X,K as E,M as m,N as R,S as ee,O as L,b as le,c as ae,d as se,e as i,P as N,g as x,Q as O,T as I,I as j,V as C}from"./index-BR1x8YMF.js";import{C as re,P as D,a as g,b as p}from"./calendar-CeosYwwB.js";import{n as te,C as T,a as f,b as U,c as V,d as M,e as P}from"./command-CVAx1ey9.js";import{u as F,B as oe}from"./cell.store-C4XojM7q.js";import{u as ne,g as ue,f as w}from"./index-B1ZRe1GT.js";import{T as Ae,a as ce,b as h,c as de,d as ie,e as y}from"./table-BJhIZj7k.js";import{H as be}from"./utilsDate-Bt-Icy7r.js";import{e as ve}from"./es-qEt9a_fm.js";import{S as Ee}from"./save-C9tnMMId.js";import"./format-B6N5uOCh.js";import"./toDate-KnhkpVFB.js";import"./endOfMonth-BxcVBkcm.js";import"./dialog-Cnjrw0Xm.js";/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const me=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],Re=Z("pencil",me);function Le({columns:a,data:r}){const c=ne({data:r,columns:a,getCoreRowModel:ue()});return e.jsx("div",{className:"rounded-md border w-full",children:e.jsxs(Ae,{children:[e.jsx(ce,{children:c.getHeaderGroups().map(o=>e.jsx(h,{children:o.headers.map(t=>e.jsx(de,{children:t.isPlaceholder?null:w(t.column.columnDef.header,t.getContext())},t.id))},o.id))}),e.jsx(ie,{children:c.getRowModel().rows?.length?c.getRowModel().rows.map(o=>e.jsx(h,{"data-state":o.getIsSelected()&&"selected",children:o.getVisibleCells().map(t=>e.jsx(y,{children:w(t.column.columnDef.cell,t.getContext())},t.id))},o.id)):e.jsx(h,{children:e.jsx(y,{colSpan:a.length,className:"h-24 text-center",children:"No results."})})})]})})}const Ne=[{header:"Fecha",accessorKey:"date",cell:a=>{const r=a.getValue();return e.jsx("span",{children:be.HumanizeNaturalDay(new Date(r))})}},{header:"Total de asistentes",accessorKey:"assistants",cell:a=>{const r=a.getValue();return e.jsx("div",{className:"text-center",children:e.jsx("div",{className:"inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 text-foreground",children:r?r.length:"0"})})}},{id:"Edit",header:"Editar",accessorKey:"id",cell:a=>{const r=B();return e.jsxs(b,{variant:"secondary",type:"button",onClick:()=>r("/cell/"+a.getValue()),children:[e.jsx(Re,{className:"mr-2"})," Editar"]})}}],xe=a=>{const[r,c]=H.useState([]),{id:o}=J(),t=F(d=>d.getCell);let u;if(o&&(u=t(o),u&&u.records&&u.records.length>0)){const d=u.records.map(n=>new Date(n.date));JSON.stringify(r)!==JSON.stringify(d)&&c(d)}return e.jsxs("div",{className:"flex flex-col  text-start rounded-lg border border-dashed p-4 shadow-sm",children:[e.jsx("h2",{className:"text-2xl font-semibold mb-2",children:"Registro de celula"}),e.jsxs("div",{className:"flex flex-row justify-around",children:[e.jsx(re,{mode:"multiple",selected:r,onSelect:c,locale:ve,className:"rounded-md border"}),e.jsxs("div",{className:"w-3/5",children:[e.jsxs("div",{className:"flex flex-row justify-between pb-2",children:["Ultimas Celulas",e.jsxs(k,{className:Y({variant:"outline"}),to:`/cell/${a.idCell}/register`,children:[e.jsx(oe,{className:"mr-2"}),"Registrar Asistencia"]})]}),u?.records&&u.records.length>0&&e.jsx(Le,{data:u.records,columns:Ne})]})]})]})},he=z({id:v().uuid().default(crypto.randomUUID()),leader:v().min(2,{message:"El lider de la celula es obligatorio."}),host:v().min(2,{message:"El anfitrion de la celula es obligatorio."}),neighborhood:Q({}),network:te({}),address:v().min(5,{message:"La dirección debe tener minimo 5 caracteres."}),createdDate:K({}),createdUser:v().min(2,{message:"Username must be at least 2 characters."})}),S=[{label:"ALEJANDRIA 1",value:1},{label:"ALEJANDRIA 3",value:2},{label:"ALEJANDRIA 4",value:3},{label:"ALEJANDRIA 5",value:4},{label:"ALEJANDRIA 6",value:5},{label:"ALEJANDRIA 7",value:6},{label:"ALEJANDRIA 8",value:7},{label:"ALEJANDRÍA REAL",value:8},{label:"ALICANTE",value:9},{label:"ALTOS DE GUALI",value:10},{label:"ALTOS DE GUALI 1",value:11},{label:"ALTOS DE GUALI 3",value:12},{label:"ALTOS DE GUALI 5",value:13},{label:"ALTOS DE SAN JUAN",value:14},{label:"ARBOLEDA",value:15},{label:"AURORA",value:16},{label:"BACATA",value:17},{label:"BALCONES DE FUNZA",value:18},{label:"BELLIZCA",value:19},{label:"CAMPIÑAS DE SAN GABRIEL",value:20},{label:"CAMPIÑAS DEL SOL",value:21},{label:"CENTRO FUNZA",value:22},{label:"CENTRO MOSQUERA",value:23},{label:"CIUDAD DE LOS PUERTOS",value:24},{label:"CIUDAD SABANA",value:25},{label:"COLIBRI",value:26},{label:"CONDOMINIO PALO ALTO",value:27},{label:"CONJUNTO CELTA",value:28},{label:"CONJUNTO RESIDENCIAL PETREL",value:29},{label:"CORTIJO DE SERREZUELA",value:30},{label:"EL BREMEN",value:31},{label:"EL CABRERO",value:32},{label:"EL DIAMANTE",value:33},{label:"EL HATO",value:34},{label:"EL PALMAR",value:35},{label:"EL POBLADO",value:36},{label:"EL REMANSO",value:37},{label:"EL TRÉBOL",value:38},{label:"ESTANCIA 2",value:39},{label:"FUNZA CENTRO",value:40},{label:"HACIENDA ALCALA",value:41},{label:"HACIENDA EL ROSAL",value:42},{label:"HACIENDA LOS CABALLOS",value:43},{label:"HACIENDA SAN ANDRES",value:44},{label:"HALCONES DE MOSQUERA",value:45},{label:"IREGUI",value:46},{label:"IREGUI 2",value:47},{label:"LA ARBOLEDA",value:48},{label:"LA AURORA",value:49},{label:"LA CABAÑA",value:50},{label:"LA CAMPIÑA",value:51},{label:"LA CARTUJA",value:52},{label:"LA CITA",value:53},{label:"LA CUMBRE",value:54},{label:"LA ESPERANZA",value:55},{label:"LA ESTANCIA",value:56},{label:"LA FORTUNA",value:57},{label:"LA PROSPERIDAD, MADRID",value:58},{label:"LOS PUERTOS",value:59},{label:"LOS VIRREYES",value:60},{label:"MADRID",value:61},{label:"MAIPORE",value:62},{label:"MALLORCA",value:63},{label:"MALLORCA 2",value:64},{label:"MALLORCA 3",value:65},{label:"MARTINEZ RICO",value:66},{label:"MAYORCA 3",value:67},{label:"MEXICO",value:68},{label:"NOVATERRA CEDRO",value:69},{label:"NOVATERRA CAOBA",value:70},{label:"NOVATERRA CEREZO",value:71},{label:"NOVATERRA GUAYACÁN",value:72},{label:"NOVATERRA ROBLE",value:73},{label:"NOVATERRA CANELO",value:74},{label:"NOVATERRA ZAPÁN",value:75},{label:"NOVATERRA NOGAL",value:76},{label:"NOVATERRA CIPRÉS",value:77},{label:"NOVAERRA ARRAYÁN",value:78},{label:"NUEVA CASTILLA",value:79},{label:"NUEVA GERONA",value:80},{label:"OASIS DE FUNZA",value:81},{label:"PARQUES DE SAN ISIDRO",value:82},{label:"PETREL",value:83},{label:"PLANADAS",value:84},{label:"POBLADO",value:85},{label:"PORTALES DE FUNZA",value:86},{label:"PORTON DE MALLORCA",value:87},{label:"PORVENIR CENTRO",value:88},{label:"PORVENIR RIO",value:89},{label:"PRADERAS I",value:90},{label:"PRADOS DE SAN ANDRÉS",value:91},{label:"PROVIVIENDA",value:92},{label:"PUERTO ALEGRE",value:93},{label:"PUERTO AZUL",value:94},{label:"PUERTO PLATA",value:95},{label:"PUERTO VALLARTA",value:96},{label:"QUINTAS DE CELTA ",value:97},{label:"QUINTAS DEL TREBOL",value:98},{label:"RECODOS DE MOSQUERA",value:99},{label:"REMANSO",value:100},{label:"RESERVA DE MALLORCA",value:101},{label:"RESERVA DE MALLORCA 3",value:102},{label:"RESERVA DE USCA",value:103},{label:"RESERVA DE MALLORCA 2",value:104},{label:"RESERVAS DE USCA",value:105},{label:"RINCON DE VIRREYES",value:106},{label:"SAMARKANDA",value:107},{label:"SAN ISIDRIO",value:108},{label:"SAN ISIDRO",value:109},{label:"SAN MARCOS",value:110},{label:"SAN MIGUEL",value:111},{label:"SAN SEBASTIAN",value:112},{label:"SAN TELMO",value:113},{label:"SANTA ANA",value:114},{label:"SANTA TERESITA",value:115},{label:"SANTANA",value:116},{label:"SANTELMO",value:117},{label:"SENDEROS DE FUNZA",value:118},{label:"SENDEROS DE SIETE TROJES",value:119},{label:"SERENAS",value:120},{label:"SERREZUELITA",value:121},{label:"SIETE TROJES",value:122},{label:"SOCIEGO",value:123},{label:"TREBOL DEL GUALI",value:124},{label:"TREBOL DEL GUALI 2",value:125},{label:"VELVERDE",value:126},{label:"VERONES",value:127},{label:"VILLA DEL ROCIO",value:128},{label:"VILLA DEL SOL",value:129},{label:"VILLA DIANA",value:130},{label:"VILLA IMPERIAL",value:131},{label:"VILLA JENNY",value:132},{label:"VILLA MARCELA",value:133},{label:"VILLA MARIA",value:134},{label:"VILLA MARIA 2",value:135},{label:"VILLA MARIA 3",value:136},{label:"VILLA MARIA 4",value:137},{label:"VILLA MARY",value:138},{label:"VILLA NUEVA",value:139},{label:"VILLA PAOLA",value:140},{label:"VILLA SAJONIA",value:141},{label:"VILLA YENNY",value:142},{label:"VILLANUEVA",value:143},{label:"VILLAS",value:144},{label:"VILLAS DEL TREBOL",value:145},{label:"VILLASAJONIA",value:146},{label:"VIRREYES",value:147},{label:"WAYRA",value:148},{label:"ZUAME",value:149},{label:"ZUAME 2",value:150}],Pe=()=>{const{id:a}=J(),r=B(),c=q(l=>l.user),{addCell:o,updateCell:t,getCell:u}=F(),d=_(l=>l.Disciples),n={id:crypto.randomUUID(),createdUser:c?.id||"",createdDate:new Date,address:"",leader:"",host:"",network:0,neighborhood:S[0].value};if(a){const l=u(a);l&&(n.id=l.id,n.createdUser=l.createdUser,n.createdDate=l.createdDate?new Date(l.createdDate):new Date,n.network=l.network,n.neighborhood=l.neighborhood,n.address=l.address,n.leader=l.leader,n.host=l.host)}const A=$({resolver:W(he),defaultValues:n}),G=l=>{a?t(l):o(l),r("/")};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex items-center",children:e.jsx("h1",{className:"text-lg font-semibold md:text-2xl",children:"Editar Celula"})}),e.jsx("div",{className:"flex items-center items-center justify-center text-start rounded-lg border border-dashed p-4 shadow-sm",children:e.jsx(X,{...A,children:e.jsxs("form",{onSubmit:A.handleSubmit(G),className:"grid grid-cols-2 grid-flow-row gap-2 w-full",children:[e.jsx(E,{control:A.control,name:"network",render:({field:l})=>e.jsxs(m,{children:[e.jsx(R,{children:"Red Celula"}),e.jsxs(ee,{onValueChange:l.onChange,defaultValue:l.value?.toString(),children:[e.jsx(L,{children:e.jsx(le,{children:e.jsx(ae,{placeholder:"Jovenes, Mujres, Hombres, Kids, etc."})})}),e.jsxs(se,{children:[e.jsx(i,{value:"1",children:"Mujeres"}),e.jsx(i,{value:"2",children:"Hombres"}),e.jsx(i,{value:"3",children:"Prejuveniles"}),e.jsx(i,{value:"4",children:"Mixta"}),e.jsx(i,{value:"5",children:"Jovenes"}),e.jsx(i,{value:"6",children:"Kids"}),e.jsx(i,{value:"7",children:"Rocas"})]})]}),e.jsx(N,{})]})}),e.jsx(E,{control:A.control,name:"neighborhood",render:({field:l})=>e.jsxs(m,{className:"flex flex-col",children:[e.jsx(R,{className:"mt-1 mb-1",children:"Barrio"}),e.jsxs(D,{children:[e.jsx(g,{asChild:!0,children:e.jsx(L,{children:e.jsxs(b,{variant:"outline",role:"combobox",className:x("w-full justify-between",!l.value&&"text-muted-foreground"),children:[l.value?S.find(s=>s.value===l.value)?.label:"Alejandria, Alicante, Porvenir, Trebol, etc.",e.jsx(O,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})})}),e.jsx(p,{className:"w-[400px] p-0",children:e.jsxs(T,{children:[e.jsx(f,{placeholder:"Escribe 2 letras para comentar la busqueda...",className:"h-9"}),e.jsxs(U,{children:[e.jsxs(V,{children:[e.jsxs("p",{className:"text-lg mb-2",children:["No se encontró el barrio. ",e.jsx("br",{}),"! Próximamente agregaremos funcionalidad para agregar un nuevo barrio"]}),e.jsx(b,{type:"button",disabled:!0,children:"Agregar un nuevo barrio"})]}),e.jsx(M,{children:S.map(s=>e.jsxs(P,{value:s.label,onSelect:()=>{A.setValue("neighborhood",s.value)},children:[s.label,e.jsx(I,{className:x("ml-auto h-4 w-4",s.value===l.value?"opacity-100":"opacity-0")})]},s.value))})]})]})})]}),e.jsx(N,{})]})}),e.jsx(E,{control:A.control,name:"address",render:({field:l})=>e.jsxs(m,{children:[e.jsx(R,{children:"Dirección"}),e.jsx(L,{children:e.jsx(j,{placeholder:"Calle 12 A N 2 - 4 Torre 2 Apartamento 301",...l})}),e.jsx(C,{children:"Ingresa la dirección completa con el complemento, torre, piso, interior, etc."}),e.jsx(N,{})]})}),e.jsx(E,{control:A.control,name:"leader",render:({field:l})=>e.jsxs(m,{className:"flex flex-col",children:[e.jsx(R,{className:"mt-1 mb-1",children:"Lider"}),e.jsxs(D,{children:[e.jsx(g,{asChild:!0,children:e.jsx(L,{children:e.jsxs(b,{variant:"outline",role:"combobox",className:x("w-full justify-between",!l.value&&"text-muted-foreground"),children:[l.value?d.find(s=>s.id==l.value)?.name:"Andrea Rodriguez",e.jsx(O,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})})}),e.jsx(p,{className:"w-[400px] p-0",children:e.jsxs(T,{children:[e.jsx(f,{placeholder:"Escribe 2 letras para comentar la busqueda...",className:"h-9"}),e.jsxs(U,{children:[e.jsxs(V,{children:[e.jsxs("p",{className:"text-lg mb-2",children:["No se encontró el lider. ",e.jsx("br",{}),"! Próximamente agregaremos funcionalidad para agregar un lider"]}),e.jsx(b,{type:"button",disabled:!0,children:"Agregar un nuevo lider"})]}),e.jsx(M,{children:d.map(s=>e.jsxs(P,{value:s.name,onSelect:()=>{A.setValue("leader",s.id)},children:[s.name,e.jsx(I,{className:x("ml-auto h-4 w-4",s.id==l.value?"opacity-100":"opacity-0")})]},s.id))})]})]})})]}),e.jsx(N,{})]})}),e.jsx(E,{control:A.control,name:"host",render:({field:l})=>e.jsxs(m,{children:[e.jsx(R,{children:"Anfitrion"}),e.jsx(L,{children:e.jsx(j,{placeholder:"David Rodriguez",...l})}),e.jsx(C,{children:"Ingrese el nombre del anfitrión que recibirá la celula en su hogar."}),e.jsx(N,{})]})}),e.jsxs(b,{type:"submit",className:"col-span-2",children:[e.jsx(Ee,{className:"mr-2"})," Guardr cambios"]})]})})}),a&&e.jsx(xe,{idCell:a})]})};export{Pe as default};
