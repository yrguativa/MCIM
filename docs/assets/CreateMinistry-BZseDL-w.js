import{o as b,a3 as y,A as N,s as n,u as v,f as E,a as M,aa as g,F as S,H as w,r as C,j as e,C as F,J as z,K as l,M as m,N as d,O as u,I,P as A,B as D,t}from"./index-BR1x8YMF.js";import{S as U}from"./switch-DkPqzOpm.js";import{S as k}from"./save-C9tnMMId.js";const B=b({id:n().optional(),name:n().min(3,"El nombre debe tener al menos 3 caracteres"),createdUser:n().min(1,"El usuario de creación es requerido"),createdDate:N().optional(),active:y().default(!0)}),H=()=>{const o=v(),{id:r}=E(),x=M(s=>s.user),{ministries:c,addMinistry:h,updateMinistry:f}=g(),i=S({resolver:w(B),defaultValues:{id:r||crypto.randomUUID(),name:"",createdUser:x?.id||"",createdDate:new Date,active:!0}});C.useEffect(()=>{(async()=>{if(r)try{const a=c.find(p=>p.id===r);a&&i.reset(a)}catch{t("Error al cargar el ministerio",{description:"No se pudo obtener la información del ministerio"}),o("/ministries")}})()},[r,c,i,o]);async function j(s){try{let a;if(r?(a=await f(s),a&&t("Ministerio actualizado correctamente",{description:"El ministerio se ha actualizado exitosamente"})):(a=await h(s),a&&t("Ministerio creado correctamente",{description:"El ministerio se ha registrado exitosamente"})),a)o("/ministries");else throw new Error(r?"Error al actualizar el ministerio":"Error al crear el ministerio")}catch{t(r?"Error al actualizar el ministerio":"Error al crear el ministerio",{description:`Ocurrió un error al intentar ${r?"actualizar":"crear"} el ministerio`})}}return e.jsx("div",{className:"container mx-auto p-4",children:e.jsxs(F,{className:"p-6",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Crear Nuevo Ministerio"}),e.jsx(z,{...i,children:e.jsxs("form",{onSubmit:i.handleSubmit(j),className:"space-y-4",children:[e.jsx(l,{control:i.control,name:"name",render:({field:s})=>e.jsxs(m,{children:[e.jsx(d,{children:"Nombre del Ministerio"}),e.jsx(u,{children:e.jsx(I,{placeholder:"Ingrese el nombre del ministerio",...s})}),e.jsx(A,{})]})}),r&&e.jsx(l,{control:i.control,name:"active",render:({field:s})=>e.jsxs(m,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(d,{className:"text-base",children:"Estado"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Activar o desactivar el ministerio"})]}),e.jsx(u,{children:e.jsx(U,{checked:s.value,onCheckedChange:s.onChange})})]})}),e.jsxs(D,{type:"submit",className:"w-full",children:[e.jsx(k,{className:"mr-2 h-4 w-4"})," ",r?"Actualizar":"Crear"," Ministerio"]})]})})]})})};export{H as default};
