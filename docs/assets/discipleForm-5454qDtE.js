import{i as v,o as I,A as j,s as i,u as S,f as F,a as U,n as P,aa as A,F as E,H as k,r as L,j as e,J as M,K as t,M as n,N as o,O as c,I as m,P as l,B as h,g as u,Q as z,ab as B,t as g}from"./index-BR1x8YMF.js";import{n as f,C as R,a as _,c as T,d as V,e as G}from"./command-CVAx1ey9.js";import{P as b,a as D,b as N,C as H}from"./calendar-CeosYwwB.js";import{C as O,a as $}from"./circle-check-big-NTtWz8ip.js";import{S as q}from"./save-C9tnMMId.js";import{f as J}from"./format-B6N5uOCh.js";import"./dialog-Cnjrw0Xm.js";import"./endOfMonth-BxcVBkcm.js";import"./toDate-KnhkpVFB.js";/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Q=v("check",K);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=[["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"M2.586 16.726A2 2 0 0 1 2 15.312V8.688a2 2 0 0 1 .586-1.414l4.688-4.688A2 2 0 0 1 8.688 2h6.624a2 2 0 0 1 1.414.586l4.688 4.688A2 2 0 0 1 22 8.688v6.624a2 2 0 0 1-.586 1.414l-4.688 4.688a2 2 0 0 1-1.414.586H8.688a2 2 0 0 1-1.414-.586z",key:"2d38gg"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],W=v("octagon-x",X),Y=I({id:i().min(1,{message:"El id es obligatorio."}).default(crypto.randomUUID()),identification:f({}),name:i().min(2,{message:"Los nombres del discipulo es obligatorio."}),lastName:i().min(2,{message:"Los apellidos del discipulo son obligatorios."}),number:f({}).optional(),address:i().min(5,{message:"La dirección debe tener minimo 5 caracteres."}).optional(),email:i().min(5,{message:"La dirección debe tener minimo 5 caracteres."}).email("El correo no es valido").optional(),birthday:j({}).optional(),ministryId:i({}),createdUser:i().min(2,{message:"El usuario de creación es obligatorio."}),createdDate:j({})}),ce=()=>{const y=S(),{id:d}=F(),x=U(s=>s.user),w=P(s=>s.updateDisciple),p=A(s=>s.ministries),r=E({resolver:k(Y),defaultValues:{id:d||crypto.randomUUID(),createdUser:x?.id||"",createdDate:new Date}});d&&L.useEffect(()=>{(async()=>{const a=await B.getDisciple(d);a&&r.reset({id:d,createdUser:a.createdUser||x?.id||"",createdDate:a.createdDate?new Date(a.createdDate):new Date,name:a.name,lastName:a.lastName,identification:parseInt(a.identification),number:a.phone?parseInt(a.phone):void 0,email:a.email||void 0,address:a.address||void 0,birthday:a.birthDate?new Date(a.birthDate):void 0,ministryId:a.ministryId})})()},[d]);async function C(s){await w({id:s.id,name:s.name,lastName:s.lastName,identification:s.identification.toString(),email:s.email,address:s.address,birthDate:s.birthday,ministryId:s.ministryId,createdUser:s.createdUser,createdDate:s.createdDate,updatedUser:x?.id||"",updatedDate:new Date,phone:s.number?.toString()})?(g("Discipulo registrado correctamente",{icon:e.jsx($,{className:"h-4 w-4 text-green-500"})}),y("/disciples")):g("Error al registrar el discipulo",{icon:e.jsx(W,{className:"h-4 w-4 text-red-500"})})}return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex items-center",children:e.jsx("h1",{className:"text-lg font-semibold md:text-2xl",children:"Registro de Discipulo"})}),e.jsx("div",{className:"flex items-center items-center justify-center text-start rounded-lg border border-dashed p-4 shadow-sm",children:e.jsx(M,{...r,children:e.jsxs("form",{onSubmit:r.handleSubmit(C),className:"grid grid-cols-2 grid-flow-row gap-2 w-full",children:[e.jsx(t,{control:r.control,name:"identification",render:({field:s})=>e.jsxs(n,{children:[e.jsx(o,{children:"Identificaciòn"}),e.jsx(c,{children:e.jsx(m,{placeholder:"1078934334",type:"number",...s})}),e.jsx(l,{})]})}),e.jsx(t,{control:r.control,name:"name",render:({field:s})=>e.jsxs(n,{children:[e.jsx(o,{children:"Nombres"}),e.jsx(c,{children:e.jsx(m,{placeholder:"Andres Camilo",...s})}),e.jsx(l,{})]})}),e.jsx(t,{control:r.control,name:"lastName",render:({field:s})=>e.jsxs(n,{children:[e.jsx(o,{children:"Apellidos"}),e.jsx(c,{children:e.jsx(m,{placeholder:"Rodriguez Romero",...s})}),e.jsx(l,{})]})}),e.jsx(t,{control:r.control,name:"number",render:({field:s})=>e.jsxs(n,{children:[e.jsx(o,{children:"Telefono"}),e.jsx(c,{children:e.jsx(m,{placeholder:"3002354034",...s})}),e.jsx(l,{})]})}),e.jsx(t,{control:r.control,name:"address",render:({field:s})=>e.jsxs(n,{children:[e.jsx(o,{children:"Direccion"}),e.jsx(c,{children:e.jsx(m,{placeholder:"Calle 12 N2-47 Alejandria 3 Torre 3 Apartamento 502 ",...s})}),e.jsx(l,{})]})}),e.jsx(t,{control:r.control,name:"ministryId",render:({field:s})=>e.jsxs(n,{className:"flex flex-col",children:[e.jsx(o,{className:"mt-1 mb-1",children:"Ministerio"}),e.jsxs(b,{children:[e.jsx(D,{asChild:!0,children:e.jsx(c,{children:e.jsxs(h,{variant:"outline",role:"combobox",className:u("w-full justify-between",!s.value&&"text-muted-foreground"),children:[s.value?p.find(a=>a.id===s.value)?.name:"Selecciona un ministerio",e.jsx(z,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})})}),e.jsx(N,{className:"w-[400px] p-0",children:e.jsxs(R,{children:[e.jsx(_,{placeholder:"Buscar ministerio..."}),e.jsx(T,{children:"No se encontró el ministerio"}),e.jsx(V,{children:p?.map(a=>e.jsxs(G,{value:a.id,onSelect:()=>{r.setValue("ministryId",a.id)},children:[e.jsx(Q,{className:u("mr-2 h-4 w-4",a.id===s.value?"opacity-100":"opacity-0")}),a.name]},a.id))})]})})]}),e.jsx(l,{})]})}),e.jsx(t,{control:r.control,name:"birthday",render:({field:s})=>e.jsxs(n,{className:"flex flex-col pt-2",children:[e.jsx(o,{children:"Fecha de nacimiento"}),e.jsxs(b,{children:[e.jsx(D,{asChild:!0,children:e.jsx(c,{children:e.jsxs(h,{variant:"outline",className:u("pl-3 text-left font-normal",!s.value&&"text-muted-foreground"),children:[s.value?J(s.value,"PPP"):e.jsx("span",{children:"Elige una fecha"}),e.jsx(O,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),e.jsx(N,{className:"w-auto p-0",align:"start",children:e.jsx(H,{mode:"single",selected:s.value,onSelect:s.onChange,disabled:a=>a>new Date||a<new Date("1900-01-01"),initialFocus:!0})})]}),e.jsx(l,{})]})}),e.jsxs(h,{type:"submit",className:"col-span-2",children:[e.jsx(q,{className:"mr-2"})," Guardr cambios"]})]})})})]})};export{ce as default};
